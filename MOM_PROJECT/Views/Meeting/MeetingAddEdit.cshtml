@model MOM_PROJECT.Models.MeetingModel

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Schedule New Meeting</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background: linear-gradient(135deg, #eef2ff, #f8fafc);
  font-family: "Inter", sans-serif;
}
.card{
  border-radius: 18px;
  max-width: 900px;
  margin: 40px auto;
  box-shadow: 0 15px 40px rgba(79,70,229,0.12);
}
.card-header{
  background: linear-gradient(90deg, #6366f1, #7c3aed);
  color: white;
  padding: 16px 24px;
  font-weight: 600;
}
.form-control, .form-select{
  border-radius: 12px;
}
</style>
</head>

<body>

<div class="container mb-3">
  <h3 class="fw-bold">Schedule New Meeting</h3>
  <p class="text-muted">Create or edit meeting</p>
</div>

<div class="card">
  <div class="card-header">➕ Schedule New Meeting</div>

  <div class="card-body">
    <!-- ✅ FORM START -->
    <form asp-controller="Meeting" asp-action="MeetingSave" method="post">

      <input type="hidden" asp-for="MeetingID" />

      <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

      <div class="row g-3">

        <div class="col-md-4">
          <label class="form-label">Meeting ID</label>
          <input class="form-control" value="Auto" disabled />
        </div>

        <div class="col-md-8">
          <label class="form-label">Meeting Description</label>
          <input asp-for="MeetingDescription" class="form-control" />
          <span asp-validation-for="MeetingDescription" class="text-danger"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label">Document Path</label>
          <input asp-for="DocumentPath" class="form-control" />
          <span asp-validation-for="DocumentPath" class="text-danger"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label">Meeting Date</label>
          <input asp-for="MeetingDate" type="date" class="form-control" />
          <span asp-validation-for="MeetingDate" class="text-danger"></span>
        </div>

        <div class="col-md-4">
          <label class="form-label">Department</label>
          <select asp-for="DepartmentID" class="form-select">
            <option value="0">-- Select Department --</option>
            <option value="1">Department 1</option>
            <option value="2">Department 2</option>
          </select>
          <span asp-validation-for="DepartmentID" class="text-danger"></span>
        </div>

        <div class="col-md-4">
          <label class="form-label">Meeting Type</label>
          <select asp-for="MeetingTypeID" class="form-select">
            <option value="0">-- Select Meeting Type --</option>
            <option value="1">Type 1</option>
            <option value="2">Type 2</option>
          </select>
          <span asp-validation-for="MeetingTypeID" class="text-danger"></span>
        </div>

        <div class="col-md-4">
          <label class="form-label">Meeting Venue</label>
          <select asp-for="MeetingVenueID" class="form-select">
            <option value="0">-- Select Meeting Venue --</option>
            <option value="1">Venue 1</option>
            <option value="2">Venue 2</option>
          </select>
          <span asp-validation-for="MeetingVenueID" class="text-danger"></span>
        </div>

        <div class="col-md-3">
          <label class="form-label">Is Cancelled</label>
          <select asp-for="IsCancelled" class="form-select" id="IsCancelled">
            <option value="">-- Select --</option>
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
          <span asp-validation-for="IsCancelled" class="text-danger"></span>
        </div>

        <div class="col-md-3">
          <label class="form-label">Cancellation Date & Time</label>
          <input asp-for="CancellationDateTime"
                 type="datetime-local"
                 class="form-control"
                 id="CancellationDateTime" />
          <span asp-validation-for="CancellationDateTime" class="text-danger"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label">Cancellation Reason</label>
          <input asp-for="CancellationReason"
                 class="form-control"
                 id="CancellationReason" />
          <span asp-validation-for="CancellationReason" class="text-danger"></span>
        </div>

      </div>

      <!-- ✅ FOOTER BUTTONS INSIDE FORM -->
      <div class="mt-4 d-flex justify-content-between">
        <a asp-action="MeetingList" asp-controller="Meeting"
           class="btn btn-secondary">← Back</a>

        <button type="submit" class="btn btn-primary px-4">
          ✔ Save Meeting
        </button>
      </div>

    </form>
    <!-- ✅ FORM END -->
  </div>
</div>

<!-- Validation Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@4.0.0/dist/jquery.validate.unobtrusive.min.js"></script>

<!-- ✅ Conditional Validation -->
<script>
$(function () {

    function toggleCancel() {
        let val = $('#IsCancelled').val();
        if (val === "true") {
            $('#CancellationDateTime').prop('required', true);
            $('#CancellationReason').prop('required', true);
        } else {
            $('#CancellationDateTime').prop('required', false).val('');
            $('#CancellationReason').prop('required', false).val('');
        }
    }

    toggleCancel();
    $('#IsCancelled').change(toggleCancel);
});
</script>

</body>
</html>